{{ define "main" }}

{{ $.Scratch.Set "tags" (slice ) }}
{{ $.Scratch.Set "licenses" (slice ) }}
{{ $.Scratch.Set "hugoversion" (slice ) }}




{{ range .Site.Data.themes.themes  }}
  {{ range .tags }}
    {{ if and ( not ( in ( $.Scratch.Get "tags" ) ( . | urlize ) ) ) ( gt ( len . ) 0 ) }}
      {{ $.Scratch.Add "tags" ( slice ( . | urlize ) ) }}
    {{ end }}
  {{ end }}
  
  {{ if and ( not ( in ( $.Scratch.Get "licenses" ) ( .license | replaceRE "[.]" "_" | urlize ) ) ) ( gt ( len .license ) 0 ) }}
    {{ $.Scratch.Add "licenses" ( slice ( .license | replaceRE "[.]" "_" | urlize ) ) }}
  {{ end }}
  
  {{ with .min_version }}
      {{ if ( not ( in ( $.Scratch.Get "hugoversion" ) ( string . ) ) )  }}
        {{ $.Scratch.Add "hugoversion" ( slice ( string . ) ) }}
      {{ end }}
  {{ end }}
  
{{ end }}


  <div class="bg-silver smaller upper status-bar">
    <div class="status"><span id="selectedThemeCount"></span> of {{ len .Site.Data.themes.themes }} themes</div>
    <div class="status"><span id="selectedTagsCount"></span> {{ len ($.Scratch.Get "tags") }} tags</div>
    <div class="status"><span id="selectedLicCount"></span> {{ len ($.Scratch.Get "licenses") }} licenses</div>
    <div class="status"><span id="selectedVerStatus">All</span> Hugo Version</div>
    
    <div class="status"><span>Last Updated </span><span>{{ now.Format "2 Jan 2006" }}</span></div>
    
  </div>

  
  <div class="wrapper">

    <div class="themes-wrapper padding">
      <div class="scroll-container padding">
        <div class="theme-box-container" >
          
          <div class="wall">
        
        {{ range  sort .Site.Data.themes.themes "min_version" "desc" }}
        <div class="item">
        <div 
            id="theme-{{.name|urlize}}"
            class="filterDiv box theme-box "
            data-tags="{{ range .tags }}{{ . | replaceRE "[.]" "_" | urlize }} {{ end }}"
            data-license="{{ .license | replaceRE "[.]" "_" |urlize}}"
            data-minver="{{.min_version}}"
            >
          <h6>{{.name}}</h6>
          {{with .description}}<p>{{ . }}</p>{{ end }}
          <a class="label upper" href="https://themes.gohugo.io/{{.path | urlize}}">Hugo Theme Page</a>
          <a class="label upper" href="{{.homepage}}">Theme Repo</a>
          
          <br />{{with .min_version}}{{ . }}{{end}} | {{with .license}}{{ . }}{{end}}
          {{with .colors}}
          <br />{{ range . }}<span class="dot" style="background-color:{{.}}">&nbsp;</span>{{ end }}
          {{ end }}
          {{with .tags}}<br />{{ range . }}<span class="label outline upper">{{ . | humanize }}</span> {{ end }}{{end}}
        </div>
        
        </div>

        {{ end }}
        </div>
      
      </div>
      </div>

    </div>
    
    <div class="tabs-wrapper">
      
        <nav class="tabs" data-component="tabs">
          <ul>
            <li class="active"><a href="#tab1">Tags</a></li>
            <li><a href="#tab2">Licenses</a></li>
            <li><a href="#tab3">Version</a></li>
          </ul>
        </nav>

        <div id="tab1" class="tab tab-buttons-container grow">
          <div class="scroll-container">
            <div class="tag-container">
              
              <button class="btn button small secondary outline w95" id="selectAllTags" onclick="showAll()"> Show all</button>
              {{ range sort ( $.Scratch.Get "tags" ) "value" "asc"}}
              <button class="btn button small secondary outline tag-btn {{.}}" 
                      id="t-{{. | replaceRE "[.]" "_" | urlize }}" 
                      onclick="tagsCheck('{{ . | replaceRE "[.]" "_"| urlize }}', 't-')"> {{ . | humanize | upper }}</button>
              {{ end }}
            </div>
          </div>
        </div>
          
        <div id="tab2" class="tab tab-buttons-container">
          <div class="scroll-container">
            <div class="tag-container">
            
              <button class="button small secondary outline active w95" id="selectAllLicenses" onclick="licenseCheck('')">
                All Licenses
              </button>
              {{ range sort ( $.Scratch.Get "licenses" ) "value" "asc" }}
              <button class="button small secondary outline license-btn" id="l-{{ . | urlize }}" onclick="tagsCheck('{{ . | replaceRE "[.]" "_" | urlize}}', 'l-')">
                {{ . | replaceRE "[_]" "." | humanize | upper }}
              </button>
              {{ end }}
            </div>
          </div>
        </div>
        
        <div id="tab3" class="tab">
          <form class="form">
            <label>Match Hugo Versions</label>
            <div class="form-item">
              <label class="checkbox"><input name="versionMatch" value="e" type="radio" onchange="versionSelected()" checked> Exactly</label>
              <label class="checkbox"><input name="versionMatch" value="gte" onchange="versionSelected()" type="radio"> Greater than or equal</label>
              <label class="checkbox"><input name="versionMatch" value="lte" onchange="versionSelected()" type="radio"> Less than or equal</label>
            </div>
            <div class="form-item">
                <select class="small" id="versionSelect" onchange="versionSelected()">
                  <option>Select All</option>
                  {{range sort ($.Scratch.Get "hugoversion") "value" "desc" }}<option>{{.}}</option>{{end}}
                </select>
            </div>
          </form>
        </div>
        
    </div>
    
  </div>

{{ end }}